# 🎵 音樂庫系統

## 📖 概述

音樂庫系統是一個基於 Netlify Blobs 的音樂管理和播放平台，支援多語言版本、多位演唱者，並提供智能快取功能。

## ✨ 主要功能

### 🎼 音樂管理
- **4 個音樂分類**
  - 鋒兄的傳奇人生（12 首）
  - 鋒兄進化Show🔥（12 首）
  - 塗哥水電王子爆紅（12 首）
  - 最瞎結婚理由（12 首）
- **總計 48 首音樂作品**

### 🌍 多語言支援
每首歌曲都提供多種語言版本：
- 原版
- 日語版
- 粵語版
- 英語版
- 韓語版

### 🎤 多位演唱者
支援不同演唱者版本：
- Rose 版
- Donald Trump 版
- Freddie Mercury 版
- Hatsune Miku 版
- Pekora 版
- Sidhu 版
- SpongeBob SquarePants 版

### 💾 智能快取系統
- **IndexedDB 本地快取**：音樂文件自動快取到瀏覽器
- **離線播放**：已快取的音樂可離線播放
- **快取管理**：
  - 單個音樂快取清除
  - 批量預載所有音樂
  - 快取大小統計
  - 快取狀態顯示

### 🎨 用戶界面
- **分類展示**：按音樂分類組織
- **播放控制**：HTML5 audio 播放器
- **載入狀態**：實時顯示載入進度
- **響應式設計**：支援桌面和移動設備

## 🏗️ 技術架構

### 前端組件
```
components/
├── MusicManager.vue        # 音樂管理器主組件
└── pages/
    └── MusicPage.vue       # 音樂頁面
```

### 後端服務
```
netlify/functions/
└── blob-proxy.js           # Netlify Blobs 代理函數
```

### 上傳腳本
```
scripts/
└── upload-music.js         # 音樂上傳腳本
```

## 📁 文件結構

```
public/music/
├── 鋒兄的傳奇人生/
│   ├── 鋒兄的傳奇人生.mp3
│   ├── 鋒兄的傳奇人生 (Rose).mp3
│   ├── 鋒兄的傳奇人生(Donald Trump).mp3
│   ├── 鋒兄的傳奇人生(Freddie Mercury).mp3
│   ├── 鋒兄的傳奇人生(Hatsune Miku).mp3
│   ├── 鋒兄的傳奇人生(Pekora).mp3
│   ├── 鋒兄的傳奇人生(Sidhu).mp3
│   ├── 鋒兄的傳奇人生(SpongeBob SquarePants).mp3
│   ├── 鋒兄的傳奇人生(日文).mp3
│   ├── 鋒兄的傳奇人生(粵語).mp3
│   ├── 鋒兄的傳奇人生(英文).mp3
│   └── 鋒兄的傳奇人生(韓文).mp3
├── 鋒兄進化Show🔥/
│   └── ... (12 首)
├── 塗哥水電王子爆紅/
│   └── ... (12 首)
└── 最瞎結婚理由/
    └── ... (12 首)
```

## 🚀 快速開始

### 1. 上傳音樂到 Netlify Blobs

**Windows:**
```bash
upload-music.bat
```

**或使用 npm:**
```bash
npm run upload-music
```

### 2. 訪問音樂庫

在應用中導航到「音樂庫」頁面，或直接訪問：
```
http://localhost:3000/about  # 開發環境
```

### 3. 測試音樂播放

使用測試頁面：
```
test-music.html
```

## 🔧 配置

### 環境變數

在 `.env` 文件中設置：
```bash
NETLIFY_SITE_ID=你的站點ID
NETLIFY_AUTH_TOKEN=你的認證令牌
```

### API 路由

音樂通過以下 API 訪問：
```
/api/blobs/music/{分類名稱}/{文件名}.mp3
```

例如：
```
/api/blobs/music/鋒兄的傳奇人生/鋒兄的傳奇人生.mp3
```

## 📊 統計數據

- **音樂分類**: 4 個
- **音樂作品**: 48 首
- **語言版本**: 5 種（原版 + 4 種語言）
- **演唱者版本**: 7 位
- **總文件數**: 48 個 MP3 文件

## 🎯 使用場景

1. **音樂欣賞**：在線播放各種版本的音樂
2. **語言學習**：通過不同語言版本學習
3. **離線播放**：預載音樂後離線欣賞
4. **版本對比**：比較不同演唱者的演繹

## 🔐 安全性

- 所有音樂文件存儲在 Netlify Blobs
- 通過代理函數訪問，保護直接 URL
- 支援 CORS 和 Range 請求
- 自動設置正確的 Content-Type

## 📈 性能優化

- **智能快取**：減少重複載入
- **按需載入**：只在播放時載入
- **流式傳輸**：支援音頻流式播放
- **CDN 加速**：Netlify CDN 全球分發

## 🐛 故障排除

### 音樂無法播放
1. 檢查 blob key 是否正確
2. 確認文件已上傳到 Netlify Blobs
3. 查看瀏覽器控制台錯誤
4. 驗證 API 路由配置

### 上傳失敗
1. 確認環境變數設置
2. 檢查 Netlify 認證令牌
3. 驗證文件格式（.mp3）
4. 確認網絡連接

### 快取問題
1. 清除瀏覽器快取
2. 使用「清除所有快取」功能
3. 檢查 IndexedDB 狀態
4. 重新載入頁面

## 📚 相關文檔

- [音樂設置指南](MUSIC_SETUP_GUIDE.md)
- [Netlify Blobs 文檔](https://docs.netlify.com/blobs/overview/)
- [上傳腳本說明](scripts/upload-music.js)

## 🎉 特色亮點

1. **豐富的音樂庫**：48 首不同版本的音樂作品
2. **多語言支援**：滿足不同語言需求
3. **智能快取**：提供流暢的播放體驗
4. **美觀界面**：漸變色設計，視覺效果出色
5. **易於管理**：簡單的上傳和管理流程

## 🔮 未來計劃

- [ ] 添加播放列表功能
- [ ] 支援音樂搜索和篩選
- [ ] 添加音樂收藏功能
- [ ] 支援更多音頻格式
- [ ] 添加音樂可視化效果
- [ ] 支援歌詞顯示

## 📞 支援

如有問題或建議，請查看相關文檔或聯繫開發團隊。

---

**鋒兄塗哥公關資訊** © 2025 - 音樂庫系統
