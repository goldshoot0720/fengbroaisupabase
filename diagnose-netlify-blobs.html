<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Netlify Blobs è¨ºæ–·å·¥å…·</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .diagnostic-info {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f8f9fa;
        }
        .test-title {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.2rem;
            font-weight: bold;
        }
        .status {
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: bold;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .warning {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        .info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 1rem;
        }
        button:hover {
            background-color: #0056b3;
        }
        button:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }
        .controls {
            text-align: center;
            margin: 30px 0;
        }
        .details {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 0.9rem;
            white-space: pre-wrap;
            word-break: break-all;
        }
        .music-test {
            margin: 15px 0;
            padding: 15px;
            border: 1px solid #e1e8ed;
            border-radius: 8px;
            background: white;
        }
        .music-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .music-name {
            font-weight: bold;
            color: #2c3e50;
        }
        .test-status {
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        .audio-test {
            margin-top: 10px;
        }
        audio {
            width: 100%;
            margin-top: 10px;
        }
        .error-details {
            background: #f8d7da;
            color: #721c24;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ Netlify Blobs è¨ºæ–·å·¥å…·</h1>
        
        <div class="diagnostic-info">
            <h3>âš ï¸ Netlify Blobs è¼‰å…¥å¤±æ•—è¨ºæ–·</h3>
            <p>æª¢æŸ¥éŸ³æ¨‚åº« Netlify Blobs é€£æ¥å’Œè¼‰å…¥å•é¡Œ</p>
        </div>

        <div class="controls">
            <button onclick="runFullDiagnostic()" id="diagnosticBtn">ğŸ” é–‹å§‹å®Œæ•´è¨ºæ–·</button>
            <button onclick="testSpecificMusic()" id="musicBtn">ğŸµ æ¸¬è©¦ç‰¹å®šéŸ³æ¨‚</button>
            <button onclick="checkNetworkConnectivity()" id="networkBtn">ğŸŒ æª¢æŸ¥ç¶²è·¯é€£æ¥</button>
            <button onclick="clearResults()" id="clearBtn">ğŸ—‘ï¸ æ¸…é™¤çµæœ</button>
        </div>

        <div id="diagnosticResults"></div>
    </div>

    <script>
        let diagnosticResults = [];

        // æ¸¬è©¦éŸ³æ¨‚åˆ—è¡¨
        const testMusic = [
            {
                name: 'é‹’å…„çš„å‚³å¥‡äººç”Ÿ - åŸç‰ˆ',
                blobKey: 'é‹’å…„çš„å‚³å¥‡äººç”Ÿ/é‹’å…„çš„å‚³å¥‡äººç”Ÿ.mp3',
                url: '/api/blobs/music/é‹’å…„çš„å‚³å¥‡äººç”Ÿ/é‹’å…„çš„å‚³å¥‡äººç”Ÿ.mp3'
            },
            {
                name: 'é‹’å…„é€²åŒ–ShowğŸ”¥ - åŸç‰ˆ',
                blobKey: 'é‹’å…„é€²åŒ–ShowğŸ”¥/é‹’å…„é€²åŒ–ShowğŸ”¥.mp3',
                url: '/api/blobs/music/é‹’å…„é€²åŒ–ShowğŸ”¥/é‹’å…„é€²åŒ–ShowğŸ”¥.mp3'
            },
            {
                name: 'å¡—å“¥æ°´é›»ç‹å­çˆ†ç´… - åŸç‰ˆ',
                blobKey: 'å¡—å“¥æ°´é›»ç‹å­çˆ†ç´…/å¡—å“¥æ°´é›»ç‹å­çˆ†ç´….mp3',
                url: '/api/blobs/music/å¡—å“¥æ°´é›»ç‹å­çˆ†ç´…/å¡—å“¥æ°´é›»ç‹å­çˆ†ç´….mp3'
            },
            {
                name: 'æœ€ççµå©šç†ç”± - åŸç‰ˆ',
                blobKey: 'æœ€ççµå©šç†ç”±/æœ€ççµå©šç†ç”±.mp3',
                url: '/api/blobs/music/æœ€ççµå©šç†ç”±/æœ€ççµå©šç†ç”±.mp3'
            }
        ];

        // é–‹å§‹å®Œæ•´è¨ºæ–·
        async function runFullDiagnostic() {
            const btn = document.getElementById('diagnosticBtn');
            const resultsDiv = document.getElementById('diagnosticResults');
            
            btn.disabled = true;
            btn.textContent = 'ğŸ”„ è¨ºæ–·ä¸­...';
            
            resultsDiv.innerHTML = '';
            diagnosticResults = [];

            // 1. æª¢æŸ¥ API ç«¯é»å¯ç”¨æ€§
            await testApiEndpoint();
            
            // 2. æª¢æŸ¥ç’°å¢ƒè®Šæ•¸
            await checkEnvironmentVariables();
            
            // 3. æ¸¬è©¦éŸ³æ¨‚è¼‰å…¥
            await testMusicLoading();
            
            // 4. æª¢æŸ¥ç€è¦½å™¨å…¼å®¹æ€§
            await checkBrowserCompatibility();
            
            // 5. æª¢æŸ¥ç¶²è·¯ç‹€æ…‹
            await checkNetworkStatus();

            // é¡¯ç¤ºæ‘˜è¦
            showDiagnosticSummary();
            
            btn.disabled = false;
            btn.textContent = 'ğŸ” é–‹å§‹å®Œæ•´è¨ºæ–·';
        }

        // æ¸¬è©¦ API ç«¯é»
        async function testApiEndpoint() {
            const section = createTestSection('ğŸŒ API ç«¯é»æ¸¬è©¦');
            document.getElementById('diagnosticResults').appendChild(section);

            try {
                const response = await fetch('/api/blobs/music/test', { method: 'HEAD' });
                
                if (response.status === 400) {
                    // é æœŸçš„éŒ¯èª¤ (Missing path parameter)
                    addTestResult(section, 'success', 'API ç«¯é»å¯ç”¨', 'API è·¯ç”±æ­£å¸¸éŸ¿æ‡‰ (é æœŸçš„ 400 éŒ¯èª¤)');
                } else {
                    addTestResult(section, 'warning', `æ„å¤–çš„éŸ¿æ‡‰: ${response.status}`, response.statusText);
                }
            } catch (error) {
                addTestResult(section, 'error', 'API ç«¯é»ä¸å¯ç”¨', error.message);
            }
        }

        // æª¢æŸ¥ç’°å¢ƒè®Šæ•¸
        async function checkEnvironmentVariables() {
            const section = createTestSection('âš™ï¸ ç’°å¢ƒè®Šæ•¸æª¢æŸ¥');
            document.getElementById('diagnosticResults').appendChild(section);

            // é€™è£¡æˆ‘å€‘ç„¡æ³•ç›´æ¥æª¢æŸ¥æœå‹™å™¨ç«¯ç’°å¢ƒè®Šæ•¸ï¼Œä½†å¯ä»¥æª¢æŸ¥é…ç½®
            try {
                const response = await fetch('/api/blobs/music/é‹’å…„çš„å‚³å¥‡äººç”Ÿ/é‹’å…„çš„å‚³å¥‡äººç”Ÿ.mp3', { method: 'HEAD' });
                
                if (response.ok) {
                    addTestResult(section, 'success', 'Netlify é…ç½®æ­£ç¢º', 'NETLIFY_SITE_ID å’Œ NETLIFY_AUTH_TOKEN é…ç½®æ­£å¸¸');
                } else if (response.status === 404) {
                    addTestResult(section, 'error', 'Netlify Blobs ä¸­æ‰¾ä¸åˆ°éŸ³æ¨‚', 'å¯èƒ½æ˜¯éŸ³æ¨‚æœªä¸Šå‚³æˆ–é…ç½®éŒ¯èª¤');
                } else if (response.status === 401 || response.status === 403) {
                    addTestResult(section, 'error', 'Netlify èªè­‰å¤±æ•—', 'NETLIFY_AUTH_TOKEN å¯èƒ½ç„¡æ•ˆæˆ–éæœŸ');
                } else {
                    addTestResult(section, 'warning', `HTTP ${response.status}`, response.statusText);
                }
            } catch (error) {
                addTestResult(section, 'error', 'ç„¡æ³•æª¢æŸ¥ Netlify é…ç½®', error.message);
            }
        }

        // æ¸¬è©¦éŸ³æ¨‚è¼‰å…¥
        async function testMusicLoading() {
            const section = createTestSection('ğŸµ éŸ³æ¨‚è¼‰å…¥æ¸¬è©¦');
            document.getElementById('diagnosticResults').appendChild(section);

            for (const music of testMusic) {
                const musicDiv = createMusicTest(music);
                section.appendChild(musicDiv);
                
                await testSingleMusic(music, musicDiv);
                
                // å°å»¶é²é¿å…éå¿«è«‹æ±‚
                await new Promise(resolve => setTimeout(resolve, 500));
            }
        }

        // æ¸¬è©¦å–®å€‹éŸ³æ¨‚
        async function testSingleMusic(music, musicDiv) {
            const statusEl = musicDiv.querySelector('.test-status');
            const audioContainer = musicDiv.querySelector('.audio-test');
            
            try {
                statusEl.textContent = 'ğŸ”„ æ¸¬è©¦ä¸­';
                statusEl.className = 'test-status info';
                
                // æ¸¬è©¦ HEAD è«‹æ±‚
                const headResponse = await fetch(music.url, { method: 'HEAD' });
                
                if (headResponse.ok) {
                    statusEl.textContent = 'âœ… é€£æ¥æˆåŠŸ';
                    statusEl.className = 'test-status success';
                    
                    // æ·»åŠ éŸ³é »æ’­æ”¾å™¨æ¸¬è©¦
                    const audio = document.createElement('audio');
                    audio.controls = true;
                    audio.preload = 'metadata';
                    audio.src = music.url;
                    
                    audio.addEventListener('loadeddata', () => {
                        const successDiv = document.createElement('div');
                        successDiv.className = 'success';
                        successDiv.textContent = 'âœ… éŸ³é »è¼‰å…¥æˆåŠŸï¼Œå¯ä»¥æ’­æ”¾';
                        audioContainer.appendChild(successDiv);
                    });
                    
                    audio.addEventListener('error', (e) => {
                        const errorDiv = document.createElement('div');
                        errorDiv.className = 'error';
                        errorDiv.textContent = `âŒ éŸ³é »è¼‰å…¥å¤±æ•—: ${getAudioErrorMessage(audio.error)}`;
                        audioContainer.appendChild(errorDiv);
                    });
                    
                    audioContainer.appendChild(audio);
                    
                    // æ·»åŠ è©³ç´°ä¿¡æ¯
                    const details = document.createElement('div');
                    details.className = 'details';
                    details.textContent = `
Content-Type: ${headResponse.headers.get('content-type') || 'æœªçŸ¥'}
Content-Length: ${headResponse.headers.get('content-length') || 'æœªçŸ¥'}
Cache-Control: ${headResponse.headers.get('cache-control') || 'æœªçŸ¥'}
                    `.trim();
                    audioContainer.appendChild(details);
                    
                } else {
                    throw new Error(`HTTP ${headResponse.status} ${headResponse.statusText}`);
                }
                
            } catch (error) {
                statusEl.textContent = 'âŒ è¼‰å…¥å¤±æ•—';
                statusEl.className = 'test-status error';
                
                const errorDiv = document.createElement('div');
                errorDiv.className = 'error-details';
                errorDiv.innerHTML = `
                    <strong>éŒ¯èª¤:</strong> ${error.message}<br>
                    <strong>å¯èƒ½åŸå› :</strong><br>
                    â€¢ éŸ³æ¨‚æœªä¸Šå‚³åˆ° Netlify Blobs<br>
                    â€¢ Netlify èªè­‰ä»¤ç‰Œç„¡æ•ˆ<br>
                    â€¢ ç¶²è·¯é€£æ¥å•é¡Œ<br>
                    â€¢ API è·¯ç”±é…ç½®éŒ¯èª¤
                `;
                audioContainer.appendChild(errorDiv);
            }
        }

        // æª¢æŸ¥ç€è¦½å™¨å…¼å®¹æ€§
        async function checkBrowserCompatibility() {
            const section = createTestSection('ğŸŒ ç€è¦½å™¨å…¼å®¹æ€§æª¢æŸ¥');
            document.getElementById('diagnosticResults').appendChild(section);

            // æª¢æŸ¥ Audio API æ”¯æ´
            if (typeof Audio !== 'undefined') {
                addTestResult(section, 'success', 'Audio API æ”¯æ´', 'ç€è¦½å™¨æ”¯æ´ HTML5 éŸ³é »');
            } else {
                addTestResult(section, 'error', 'Audio API ä¸æ”¯æ´', 'ç€è¦½å™¨ä¸æ”¯æ´ HTML5 éŸ³é »');
            }

            // æª¢æŸ¥ Fetch API æ”¯æ´
            if (typeof fetch !== 'undefined') {
                addTestResult(section, 'success', 'Fetch API æ”¯æ´', 'ç€è¦½å™¨æ”¯æ´ç¾ä»£ç¶²è·¯è«‹æ±‚');
            } else {
                addTestResult(section, 'error', 'Fetch API ä¸æ”¯æ´', 'ç€è¦½å™¨ä¸æ”¯æ´ Fetch API');
            }

            // æª¢æŸ¥éŸ³é »æ ¼å¼æ”¯æ´
            const audio = new Audio();
            const mp3Support = audio.canPlayType('audio/mpeg');
            
            if (mp3Support === 'probably' || mp3Support === 'maybe') {
                addTestResult(section, 'success', 'MP3 æ ¼å¼æ”¯æ´', `æ”¯æ´ç¨‹åº¦: ${mp3Support}`);
            } else {
                addTestResult(section, 'error', 'MP3 æ ¼å¼ä¸æ”¯æ´', 'ç€è¦½å™¨ä¸æ”¯æ´ MP3 æ ¼å¼');
            }
        }

        // æª¢æŸ¥ç¶²è·¯ç‹€æ…‹
        async function checkNetworkStatus() {
            const section = createTestSection('ğŸ“¡ ç¶²è·¯ç‹€æ…‹æª¢æŸ¥');
            document.getElementById('diagnosticResults').appendChild(section);

            // æª¢æŸ¥ç·šä¸Šç‹€æ…‹
            if (navigator.onLine) {
                addTestResult(section, 'success', 'ç¶²è·¯é€£æ¥æ­£å¸¸', 'ç€è¦½å™¨æª¢æ¸¬åˆ°ç¶²è·¯é€£æ¥');
            } else {
                addTestResult(section, 'error', 'ç¶²è·¯é€£æ¥ç•°å¸¸', 'ç€è¦½å™¨æª¢æ¸¬åˆ°é›¢ç·šç‹€æ…‹');
            }

            // æª¢æŸ¥é€£æ¥é€Ÿåº¦ (ç°¡å–®æ¸¬è©¦)
            const startTime = performance.now();
            try {
                await fetch('/', { method: 'HEAD' });
                const endTime = performance.now();
                const responseTime = Math.round(endTime - startTime);
                
                if (responseTime < 100) {
                    addTestResult(section, 'success', 'é€£æ¥é€Ÿåº¦è‰¯å¥½', `éŸ¿æ‡‰æ™‚é–“: ${responseTime}ms`);
                } else if (responseTime < 500) {
                    addTestResult(section, 'warning', 'é€£æ¥é€Ÿåº¦ä¸€èˆ¬', `éŸ¿æ‡‰æ™‚é–“: ${responseTime}ms`);
                } else {
                    addTestResult(section, 'warning', 'é€£æ¥é€Ÿåº¦è¼ƒæ…¢', `éŸ¿æ‡‰æ™‚é–“: ${responseTime}ms`);
                }
            } catch (error) {
                addTestResult(section, 'error', 'ç„¡æ³•æ¸¬è©¦é€£æ¥é€Ÿåº¦', error.message);
            }
        }

        // æ¸¬è©¦ç‰¹å®šéŸ³æ¨‚
        async function testSpecificMusic() {
            const musicName = prompt('è«‹è¼¸å…¥è¦æ¸¬è©¦çš„éŸ³æ¨‚ blobKey (ä¾‹å¦‚: é‹’å…„çš„å‚³å¥‡äººç”Ÿ/é‹’å…„çš„å‚³å¥‡äººç”Ÿ.mp3):');
            if (!musicName) return;

            const btn = document.getElementById('musicBtn');
            btn.disabled = true;
            btn.textContent = 'ğŸ”„ æ¸¬è©¦ä¸­...';

            const section = createTestSection(`ğŸµ æ¸¬è©¦éŸ³æ¨‚: ${musicName}`);
            document.getElementById('diagnosticResults').appendChild(section);

            const url = `/api/blobs/music/${encodeURIComponent(musicName)}`;
            
            try {
                const response = await fetch(url, { method: 'HEAD' });
                
                if (response.ok) {
                    addTestResult(section, 'success', 'éŸ³æ¨‚è¼‰å…¥æˆåŠŸ', `HTTP ${response.status}`);
                    
                    // æ·»åŠ æ’­æ”¾å™¨
                    const audioDiv = document.createElement('div');
                    audioDiv.innerHTML = `
                        <audio controls style="width: 100%; margin-top: 10px;">
                            <source src="${url}" type="audio/mpeg">
                            æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´éŸ³æ¨‚æ’­æ”¾ã€‚
                        </audio>
                    `;
                    section.appendChild(audioDiv);
                } else {
                    addTestResult(section, 'error', 'éŸ³æ¨‚è¼‰å…¥å¤±æ•—', `HTTP ${response.status} ${response.statusText}`);
                }
            } catch (error) {
                addTestResult(section, 'error', 'è«‹æ±‚å¤±æ•—', error.message);
            }

            btn.disabled = false;
            btn.textContent = 'ğŸµ æ¸¬è©¦ç‰¹å®šéŸ³æ¨‚';
        }

        // æª¢æŸ¥ç¶²è·¯é€£æ¥
        async function checkNetworkConnectivity() {
            const btn = document.getElementById('networkBtn');
            btn.disabled = true;
            btn.textContent = 'ğŸ”„ æª¢æŸ¥ä¸­...';

            const section = createTestSection('ğŸŒ ç¶²è·¯é€£æ¥æª¢æŸ¥');
            document.getElementById('diagnosticResults').appendChild(section);

            // æ¸¬è©¦æœ¬åœ°æœå‹™å™¨
            try {
                const response = await fetch('/', { method: 'HEAD' });
                addTestResult(section, 'success', 'æœ¬åœ°æœå‹™å™¨é€£æ¥æ­£å¸¸', `HTTP ${response.status}`);
            } catch (error) {
                addTestResult(section, 'error', 'æœ¬åœ°æœå‹™å™¨é€£æ¥å¤±æ•—', error.message);
            }

            // æ¸¬è©¦ Netlify é€£æ¥ (é€šéæˆ‘å€‘çš„ API)
            try {
                const response = await fetch('/api/blobs/music/test-connection', { method: 'HEAD' });
                if (response.status === 400) {
                    addTestResult(section, 'success', 'Netlify API é€£æ¥æ­£å¸¸', 'API è·¯ç”±å¯é”');
                } else {
                    addTestResult(section, 'warning', `æ„å¤–éŸ¿æ‡‰: ${response.status}`, response.statusText);
                }
            } catch (error) {
                addTestResult(section, 'error', 'Netlify API é€£æ¥å¤±æ•—', error.message);
            }

            btn.disabled = false;
            btn.textContent = 'ğŸŒ æª¢æŸ¥ç¶²è·¯é€£æ¥';
        }

        // å‰µå»ºæ¸¬è©¦å€å¡Š
        function createTestSection(title) {
            const section = document.createElement('div');
            section.className = 'test-section';
            section.innerHTML = `<div class="test-title">${title}</div>`;
            return section;
        }

        // å‰µå»ºéŸ³æ¨‚æ¸¬è©¦é …ç›®
        function createMusicTest(music) {
            const div = document.createElement('div');
            div.className = 'music-test';
            div.innerHTML = `
                <div class="music-header">
                    <div class="music-name">${music.name}</div>
                    <div class="test-status info">ç­‰å¾…æ¸¬è©¦</div>
                </div>
                <div class="details">blobKey: ${music.blobKey}</div>
                <div class="audio-test"></div>
            `;
            return div;
        }

        // æ·»åŠ æ¸¬è©¦çµæœ
        function addTestResult(section, type, title, message) {
            const resultDiv = document.createElement('div');
            resultDiv.className = `status ${type}`;
            resultDiv.innerHTML = `<strong>${title}</strong><br>${message}`;
            section.appendChild(resultDiv);
        }

        // é¡¯ç¤ºè¨ºæ–·æ‘˜è¦
        function showDiagnosticSummary() {
            const section = createTestSection('ğŸ“Š è¨ºæ–·æ‘˜è¦');
            document.getElementById('diagnosticResults').appendChild(section);

            const successCount = document.querySelectorAll('.status.success').length;
            const errorCount = document.querySelectorAll('.status.error').length;
            const warningCount = document.querySelectorAll('.status.warning').length;
            const totalCount = successCount + errorCount + warningCount;

            addTestResult(section, 'info', 'æ¸¬è©¦çµ±è¨ˆ', 
                `ç¸½æ¸¬è©¦: ${totalCount} | æˆåŠŸ: ${successCount} | è­¦å‘Š: ${warningCount} | éŒ¯èª¤: ${errorCount}`);

            if (errorCount === 0) {
                addTestResult(section, 'success', 'è¨ºæ–·çµæœ', 'æ‰€æœ‰æ¸¬è©¦é€šéï¼Œç³»çµ±é‹è¡Œæ­£å¸¸');
            } else if (errorCount < totalCount / 2) {
                addTestResult(section, 'warning', 'è¨ºæ–·çµæœ', 'éƒ¨åˆ†æ¸¬è©¦å¤±æ•—ï¼Œè«‹æª¢æŸ¥ä¸Šè¿°éŒ¯èª¤é …ç›®');
            } else {
                addTestResult(section, 'error', 'è¨ºæ–·çµæœ', 'å¤šé …æ¸¬è©¦å¤±æ•—ï¼Œç³»çµ±å¯èƒ½å­˜åœ¨åš´é‡å•é¡Œ');
            }
        }

        // æ¸…é™¤çµæœ
        function clearResults() {
            document.getElementById('diagnosticResults').innerHTML = '';
            diagnosticResults = [];
        }

        // ç²å–éŸ³é »éŒ¯èª¤è¨Šæ¯
        function getAudioErrorMessage(error) {
            if (!error) return 'æœªçŸ¥éŒ¯èª¤';
            
            switch (error.code) {
                case 1:
                    return 'MEDIA_ERR_ABORTED - éŸ³é »è¼‰å…¥è¢«ä¸­æ­¢';
                case 2:
                    return 'MEDIA_ERR_NETWORK - ç¶²è·¯éŒ¯èª¤';
                case 3:
                    return 'MEDIA_ERR_DECODE - è§£ç¢¼éŒ¯èª¤';
                case 4:
                    return 'MEDIA_ERR_SRC_NOT_SUPPORTED - ä¸æ”¯æ´çš„æ ¼å¼æˆ–ä¾†æº';
                default:
                    return `éŒ¯èª¤ä»£ç¢¼: ${error.code}`;
            }
        }

        // é é¢è¼‰å…¥æ™‚é¡¯ç¤ºåŸºæœ¬ä¿¡æ¯
        window.onload = function() {
            console.log('Netlify Blobs è¨ºæ–·å·¥å…·å·²è¼‰å…¥');
            console.log('ç•¶å‰ URL:', window.location.href);
            console.log('ç”¨æˆ¶ä»£ç†:', navigator.userAgent);
        };
    </script>
</body>
</html>